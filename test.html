<!DOCTYPE html>
<html>
    <head>
        <title>Tic Tac Toe</title>
    </head>

    <body>

        <div class="yui3-skin-sam" id="console"></div>

        <script src="http://yui.yahooapis.com/3.8.1/build/yui/yui-min.js"></script>
        <script>

            YUI({
                modules: {
                    'tic-tac-toe-board': {
                        fullpath: 'Javascripts/tic-tac-toe-board.js',
                        requires: ['base-build', 'widget']
                    }
                }
            }).use('tic-tac-toe-board', 'test-console', function (Y) {
                "use strict";


                var testPossibilities = new Y.Test.Case({
                    name: 'possibilities() Tests',

                    'Array should have nine members that correspond to each of the nine x, y coordinates': function () {
                        var board = [['n', 'n', 'n'],
                                    ['n', 'n', 'n'],
                                    ['n', 'n', 'n']],

                            testGame = new Y.ticTacToeBoard,
                            literalListToEqual = [[0, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2], [2, 0], [2, 1], [2, 2]],
                            result = testGame.possibleMoveLocations(board),
                            i,
                            j;
                            for(i = 0; i < literalListToEqual.length; i += 1) {
                                for(j = 0; j < literalListToEqual[i].length; j += 1) {
                                    Y.Assert.areSame(literalListToEqual[i][j], result[i][j]);
                                }
                            }
                    }
                }),

                filteringForAI = new Y.Test.Case({
                    name: 'AI Filtering Tests',

                    'Function should take an Array of boards and return an array of the boards where x is winning': function () {
                        var winningBoard, notWinningBoard, multiWinningBoard,

                            testGame = new Y.ticTacToeBoard;

                        winningBoard = testGame.makeBoardArrayFromSquareAttrs([['x', 'x', 'n'],
                                                                               ['n', 'o', 'n'],
                                                                               ['n', 'o', 'n']]);

                        notWinningBoard = testGame.makeBoardArrayFromSquareAttrs([['x', 'o', 'x'],
                                                                                  ['n', 'n', 'n'],
                                                                                  ['n', 'n', 'n']]);


                        multiWinningBoard = testGame.makeBoardArrayFromSquareAttrs([['x', 'o', 'x'],
                                                                                   ['x', 'x', 'n'],
                                                                                   ['n', 'n', 'n']]);

                        console.log(winningBoard.projectAllPossibleXMoveBoardsThisTurn());
                        Y.Assert.areSame(1, (winningBoard.filterForWinX(winningBoard.projectAllPossibleXMoveBoardsThisTurn())).length);
                        Y.Assert.areSame(0, (notWinningBoard.filterForWinX(notWinningBoard.projectAllPossibleXMoveBoardsThisTurn())).length);
                        Y.Assert.areSame(3, (multiWinningBoard.filterForWinX(multiWinningBoard.projectAllPossibleXMoveBoardsThisTurn())).length);

                    }
                });
                new Y.Test.Console().render('#console');
                Y.Test.Runner.add(testPossibilities);
                Y.Test.Runner.add(filteringForAI);
                Y.Test.Runner.run();
            });

        </script>
    </body>
</html>
